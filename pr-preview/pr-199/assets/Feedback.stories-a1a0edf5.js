import{a as u,j as e,F as R}from"./jsx-runtime-390e5fc8.js";import{r as g}from"./index-570b25c1.js";import{T as L,b as P,c as G,P as W,a as j}from"./index-412489c0.js";import{B as I,L as E,I as H}from"./index-407eec83.js";import{T as z}from"./index-11342979.js";import{F as O,a as $,b as D,C as M}from"./index-d61120f8.js";import{F as J}from"./index-036f48fa.js";import{u as K,C as Q}from"./index.esm-d81a0d8c.js";import{G as s}from"./Grid-f9280688.js";import{s as b}from"./styled-523cb007.js";import{T as U}from"./index-a67dd6a2.js";import{C as X}from"./Container-9c6f17e6.js";import"./_commonjsHelpers-042e6b4d.js";import"./Popover-c29df6e8.js";import"./createTheme-3fee607a.js";import"./clsx-b831246b.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-16f43d9e.js";import"./useThemeProps-98dc6282.js";import"./generateUtilityClasses-b58f947a.js";import"./Modal-c0d06b41.js";import"./Backdrop-374fdef5.js";import"./useTheme-c07bb8e7.js";import"./utils-1ac07bae.js";import"./TransitionGroupContext-c71596b3.js";import"./index-8a077077.js";import"./useForkRef-153a0a89.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./useEventCallback-e1b9edb9.js";import"./useEnhancedEffect-460150e6.js";import"./useSlotProps-95ccb7bd.js";import"./isHostComponent-73d6e646.js";import"./createChainedFunction-0bab83cf.js";import"./Grow-7a512b16.js";import"./Paper-23216610.js";import"./debounce-517eeb3c.js";import"./index-7c0e1f2b.js";import"./_baseFor-53bad3ef.js";import"./_initCloneObject-31384e14.js";import"./isPlainObject-272efb33.js";import"./ToggleButtonGroup-31eeebfe.js";import"./react-is.production.min-a192e302.js";import"./ToggleButton-7b7a9f3b.js";import"./ButtonBase-e49cd770.js";import"./emotion-react.browser.esm-b00e6d55.js";import"./useIsFocusVisible-5e7b1ff1.js";import"./Button-f5f3570b.js";import"./Tooltip-bac6b43c.js";import"./useControlled-9b1271e0.js";import"./useId-6f4bfce0.js";import"./IconButton-d91b4b62.js";import"./LoadingButton-f3e3dfec.js";import"./extends-90dea224.js";import"./CircularProgress-9882927c.js";import"./TextField-53d1d657.js";import"./FormControl-76ef8a2c.js";import"./utils-3d35716f.js";import"./isMuiElement-6907f060.js";import"./FormLabel-ae04d927.js";import"./Select-e3d164a2.js";import"./Menu-20281694.js";import"./List-61c808de.js";import"./createSvgIcon-b91027d9.js";import"./SvgIcon-4a92f20a.js";import"./OutlinedInput-c5324d24.js";import"./GlobalStyles-0727d895.js";import"./FormHelperText-8ba5d276.js";import"./faCircleArrowRight-a1a581c0.js";import"./index-72be33c9.js";import"./faMagnifyingGlass-482fd726.js";import"./index-9681c8ff.js";import"./Box-df8a6414.js";import"./extendSxProp-b1abb964.js";import"./FormControlLabel-34fd3025.js";import"./Typography-cb5a2c80.js";import"./Stack-ded40119.js";import"./styled-5c6c15e1.js";import"./Divider-c3141017.js";import"./dividerClasses-871b72e6.js";const Y=b(L,{name:"AvFeedbackContainer",slot:"SmileButtons"})({}),Z=b(s,{name:"AvFeedbackContainer",slot:"FormActions"})({}),ee=({disabled:r,Icon:o,label:a,value:t,...i})=>e("div",{children:e(P,{"aria-label":t,value:t,...i,disabled:r,children:e(o,{fontSize:"large"})})}),_=({analytics:r,appName:o,handleClose:a,loading:t,sent:i,setLoading:m,setSent:d})=>{var x;const{control:F,formState:{errors:h},handleSubmit:p,register:S,setValue:k,watch:V}=K(),B=async({smileField:n,...l})=>{m(!0);try{const c=await G.getCurrentRegion();await r.info({surveyId:`${o.replace(/\s/g,"_")}_Smile_Survey`,smileLocation:`${o}`,smile:`icon-${n}`,url:window.location.href,region:c.data.regions[0]&&c.data.regions[0].id,userAgent:window.navigator.userAgent,submitTime:new Date,...l}),d(!0),m(!1)}catch{d(!1),m(!1)}};g.useEffect(()=>{i&&setTimeout(()=>{a()},2e3)},[i]);const w=[{Icon:O,label:"What do you like?",value:"smile"},{Icon:$,label:"What would you improve?",value:"meh"},{Icon:D,label:"What don't you like?",value:"frown"}],v=V("smileField"),N=()=>{const n=w.find(l=>l.value===v);return(n==null?void 0:n.label)||"What would you improve?"};return i?null:u(s,{component:"form",container:!0,justifyContent:"center",onSubmit:p(B),"aria-label":"Feedback Form","aria-describedby":"feedback-form-header",children:[e(Q,{control:F,name:"smileField",render:({field:n})=>e(Y,{children:w.map((l,c)=>e(ee,{autoFocus:c===0,disabled:t,...l},l.value)),...n,"aria-labelledby":"feedback-form-header",onChange:(l,c)=>{k(n.name,c)},size:"medium",exclusive:!0})}),v&&e(z,{...S("feedback",{required:"This field is required",maxLength:{value:200,message:"This field must not exceed 200 characters"}}),fullWidth:!0,multiline:!0,minRows:3,maxRows:3,label:N(),inputProps:{"aria-required":"true"},InputLabelProps:{component:J,required:!0},helperText:((x=h.feedback)==null?void 0:x.message)||"Max 200 characters",error:!!h.feedback,disabled:t}),u(Z,{container:!0,direction:"row",spacing:1,children:[e(s,{item:!0,children:e(I,{color:"secondary",disabled:t,onClick:a,children:"Cancel"})}),e(s,{item:!0,children:e(E,{disabled:!v,loading:t,type:"submit",variant:"contained",children:"Send Feedback"})})]})]})};try{_.displayName="FeedbackForm",_.__docgenInfo={description:"",displayName:"FeedbackForm",props:{analytics:{defaultValue:null,description:"",name:"analytics",required:!0,type:{name:"{ info: (entries: Record<string, unknown>) => any; }"}},appName:{defaultValue:null,description:"",name:"appName",required:!0,type:{name:"string"}},handleClose:{defaultValue:null,description:"",name:"handleClose",required:!0,type:{name:"() => void"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},sent:{defaultValue:null,description:"",name:"sent",required:!0,type:{name:"boolean"}},setLoading:{defaultValue:null,description:"",name:"setLoading",required:!0,type:{name:"React.Dispatch<React.SetStateAction<boolean>>"}},setSent:{defaultValue:null,description:"",name:"setSent",required:!0,type:{name:"React.Dispatch<React.SetStateAction<boolean>>"}}}}}catch{}const te=b(s,{name:"AvFeedbackContainer",slot:"FeedbackHeaderContainer"})({}),C=({appName:r,handleClose:o,loading:a,sent:t})=>u(te,{alignItems:"center",container:!0,direction:"row",marginBottom:t?"0px":"8px",justifyContent:"space-between",flexWrap:"nowrap",id:"feedback-form-header",children:[e(s,{item:!0,whiteSpace:"normal",children:e(U,{component:"h2",variant:"h5",children:t?"Thank you for your feedback.":`Tell us what you think about ${r}`})}),e(s,{item:!0,marginRight:"-8px",children:e(H,{disabled:a,title:"Close",onClick:o,children:e(M,{})})})]});try{C.displayName="FeedbackHeader",C.__docgenInfo={description:"",displayName:"FeedbackHeader",props:{appName:{defaultValue:null,description:"",name:"appName",required:!0,type:{name:"string"}},handleClose:{defaultValue:null,description:"",name:"handleClose",required:!0,type:{name:"() => void"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},sent:{defaultValue:null,description:"",name:"sent",required:!0,type:{name:"boolean"}}}}}catch{}const re=b(X,{name:"AvFeedbackContainer",slot:"root"})({}),oe=b(I,{name:"AvGiveFeedbackButton",slot:"root"})({}),y=({analytics:r=j,appName:o})=>{const[a,t]=g.useState(null),[i,m]=g.useState(!1),[d,F]=g.useState(!1),h=k=>{t(k.currentTarget),m(!1)},p=()=>{t(null)};return u(R,{children:[e(oe,{onClick:h,color:"secondary",children:"Give Feedback"}),e(W,{anchorEl:a,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{marginTop:"4px"},disableRestoreFocus:!0,onClose:p,open:!!a,transformOrigin:{vertical:"top",horizontal:"right"},children:u(re,{children:[e(C,{appName:o,handleClose:p,loading:d,sent:i}),e(_,{analytics:r,appName:o,handleClose:p,loading:d,sent:i,setLoading:F,setSent:m})]})})]})};try{y.displayName="Feedback",y.__docgenInfo={description:"",displayName:"Feedback",props:{analytics:{defaultValue:null,description:"",name:"analytics",required:!1,type:{name:"{ info: (entries: any) => any; }"}},appName:{defaultValue:null,description:"",name:"appName",required:!0,type:{name:"string"}}}}}catch{}const It={title:"Components/Feedback/Feedback",component:y,tags:["autodocs"]},f={render:r=>e(y,{...r}),args:{appName:"This App"}};var T,q,A;f.parameters={...f.parameters,docs:{...(T=f.parameters)==null?void 0:T.docs,source:{originalSource:`{
  render: (args: FeedbackProps) => <Feedback {...args} />,
  args: {
    appName: 'This App'
  }
}`,...(A=(q=f.parameters)==null?void 0:q.docs)==null?void 0:A.source}}};const Vt=["_Feedback"];export{f as _Feedback,Vt as __namedExportsOrder,It as default};
//# sourceMappingURL=Feedback.stories-a1a0edf5.js.map
