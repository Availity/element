import{r as p}from"./index-570b25c1.js";import{T as B,P as A,a as I,b as L,c as G}from"./index-4810b236.js";import{B as y,L as P,I as R}from"./index-5efdcb36.js";import{T as W}from"./index-edff813b.js";import{C as j,F as q,a as z,b as E}from"./index-53288845.js";import{F as _}from"./index-77d4584f.js";import{u as $,C as H}from"./index.esm-d81a0d8c.js";import{j as h,F as O,a as e}from"./jsx-runtime-a3bcee63.js";import{T as M}from"./index-bf8151f5.js";import{G as s}from"./Grid-62fb460c.js";import{C as V}from"./Container-3c3a93d6.js";import{s as b}from"./styled-523cb007.js";var D=b(B,{name:"AvFeedbackContainer",slot:"SmileButtons"})({}),J=b(s,{name:"AvFeedbackContainer",slot:"FormActions"})({}),K=({disabled:n,Icon:o,label:a,value:r,...t})=>e("div",{children:e(L,{"aria-label":r,value:r,...t,disabled:n,children:e(o,{fontSize:"large"})})}),Q=({analytics:n,appName:o,handleClose:a,loading:r,sent:t,setLoading:c,setSent:m})=>{var f;const{control:v,formState:{errors:d},handleSubmit:k,register:F,setValue:w,watch:x}=$(),S=async({smileField:i,...l})=>{c(!0);try{const u=await G.getCurrentRegion();await n.info({surveyId:`${o.replace(/\s/g,"_")}_Smile_Survey`,smileLocation:`${o}`,smile:`icon-${i}`,url:window.location.href,region:u.data.regions[0]&&u.data.regions[0].id,userAgent:window.navigator.userAgent,submitTime:new Date,...l}),m(!0),c(!1)}catch{m(!1),c(!1)}};p.useEffect(()=>{t&&setTimeout(()=>{a()},2e3)},[t]);const C=[{Icon:q,label:"What do you like?",value:"smile"},{Icon:z,label:"What would you improve?",value:"meh"},{Icon:E,label:"What don't you like?",value:"frown"}],g=x("smileField"),T=()=>{const i=C.find(l=>l.value===g);return(i==null?void 0:i.label)||"What would you improve?"};return t?null:h(s,{component:"form",container:!0,justifyContent:"center",onSubmit:k(S),"aria-label":"Feedback Form","aria-describedby":"feedback-form-header",children:[e(H,{control:v,name:"smileField",render:({field:i})=>e(D,{children:C.map((l,u)=>e(K,{autoFocus:u===0,disabled:r,...l},l.value)),...i,"aria-labelledby":"feedback-form-header",onChange:(l,u)=>{w(i.name,u)},size:"medium",exclusive:!0})}),g&&e(W,{...F("feedback",{required:"This field is required",maxLength:{value:200,message:"This field must not exceed 200 characters"}}),fullWidth:!0,multiline:!0,minRows:3,maxRows:3,label:T(),inputProps:{"aria-required":"true"},InputLabelProps:{component:_,required:!0},helperText:((f=d.feedback)==null?void 0:f.message)||"Max 200 characters",error:!!d.feedback,disabled:r}),h(J,{container:!0,direction:"row",spacing:1,children:[e(s,{item:!0,children:e(y,{color:"secondary",disabled:r,onClick:a,children:"Cancel"})}),e(s,{item:!0,children:e(P,{disabled:!g,loading:r,type:"submit",variant:"contained",children:"Send Feedback"})})]})]})},U=b(s,{name:"AvFeedbackContainer",slot:"FeedbackHeaderContainer"})({}),X=({appName:n,handleClose:o,loading:a,sent:r})=>h(U,{alignItems:"center",container:!0,direction:"row",marginBottom:r?"0px":"8px",justifyContent:"space-between",flexWrap:"nowrap",id:"feedback-form-header",children:[e(s,{item:!0,whiteSpace:"normal",children:e(M,{component:"h2",variant:"h5",children:r?"Thank you for your feedback.":`Tell us what you think about ${n}`})}),e(s,{item:!0,marginRight:"-8px",children:e(R,{disabled:a,title:"Close",onClick:o,children:e(j,{})})})]}),Y=b(V,{name:"AvFeedbackContainer",slot:"root"})({}),Z=b(y,{name:"AvGiveFeedbackButton",slot:"root"})({}),ue=({analytics:n=I,appName:o})=>{const[a,r]=p.useState(null),[t,c]=p.useState(!1),[m,f]=p.useState(!1),v=F=>{r(F.currentTarget),c(!1)},d=()=>{r(null)};return h(O,{children:[e(Z,{onClick:v,color:"secondary",children:"Give Feedback"}),e(A,{anchorEl:a,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{marginTop:"4px"},disableRestoreFocus:!0,onClose:d,open:!!a,transformOrigin:{vertical:"top",horizontal:"right"},children:h(Y,{children:[e(X,{appName:o,handleClose:d,loading:m,sent:t}),e(Q,{analytics:n,appName:o,handleClose:d,loading:m,sent:t,setLoading:f,setSent:c})]})})]})};export{ue as F};
//# sourceMappingURL=index-0e9deb8d.js.map
