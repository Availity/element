class l{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(e,t,i={}){let s=this.events[e];s||(s={highPriority:new Map,regular:new Map},this.events[e]=s),i.isFirst?s.highPriority.set(t,!0):s.regular.set(t,!0)}removeListener(e,t){this.events[e]&&(this.events[e].regular.delete(t),this.events[e].highPriority.delete(t))}removeAllListeners(){this.events={}}emit(e,...t){const i=this.events[e];if(!i)return;const s=Array.from(i.highPriority.keys()),h=Array.from(i.regular.keys());for(let r=s.length-1;r>=0;r-=1){const n=s[r];i.highPriority.has(n)&&n.apply(this,t)}for(let r=0;r<h.length;r+=1){const n=h[r];i.regular.has(n)&&n.apply(this,t)}}once(e,t){const i=this;this.on(e,function s(...h){i.removeListener(e,s),t.apply(i,h)})}}export{l as E};
