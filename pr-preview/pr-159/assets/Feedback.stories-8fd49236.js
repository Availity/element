import{j as u,a as e,F as B}from"./jsx-runtime-a3bcee63.js";import{r as b}from"./index-570b25c1.js";import{T as R,b as L,c as W,P,a as j}from"./index-7513f905.js";import{B as I,L as z,I as E}from"./index-6cb0af17.js";import{T as G}from"./index-ac70c534.js";import{F as O,a as $,b as D,C as H}from"./index-8e81bbc6.js";import{F as M}from"./index-2e583e87.js";import{u as J,C as K}from"./index.esm-d81a0d8c.js";import{G as s}from"./Grid-62fb460c.js";import{s as V}from"./styled-523cb007.js";import{T as Q}from"./index-bf8151f5.js";import{C as U}from"./Container-3c3a93d6.js";import"./_commonjsHelpers-042e6b4d.js";import"./Popover-3b512651.js";import"./createTheme-3fee607a.js";import"./clsx-b831246b.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-16f43d9e.js";import"./useThemeProps-98dc6282.js";import"./generateUtilityClasses-b58f947a.js";import"./Modal-a1db681c.js";import"./Backdrop-4a58ec86.js";import"./useTheme-c07bb8e7.js";import"./utils-1ac07bae.js";import"./TransitionGroupContext-c71596b3.js";import"./index-8a077077.js";import"./useForkRef-153a0a89.js";import"./objectWithoutPropertiesLoose-b6174fb2.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./useEventCallback-e1b9edb9.js";import"./useEnhancedEffect-460150e6.js";import"./useSlotProps-039d2b0a.js";import"./createChainedFunction-0bab83cf.js";import"./Grow-8a00b99f.js";import"./Paper-389d56e7.js";import"./debounce-517eeb3c.js";import"./index-7c0e1f2b.js";import"./_baseFor-53bad3ef.js";import"./_initCloneObject-31384e14.js";import"./isPlainObject-272efb33.js";import"./ToggleButtonGroup-2e6e00f5.js";import"./react-is.production.min-a192e302.js";import"./ToggleButton-54342354.js";import"./ButtonBase-44753119.js";import"./emotion-react.browser.esm-b00e6d55.js";import"./useIsFocusVisible-5e7b1ff1.js";import"./Button-af0ca45f.js";import"./Tooltip-cae7e212.js";import"./useControlled-9b1271e0.js";import"./useId-6f4bfce0.js";import"./IconButton-3fd19b93.js";import"./LoadingButton-1ec35b70.js";import"./extends-90dea224.js";import"./CircularProgress-96ade162.js";import"./TextField-e8a3b764.js";import"./FormLabel-d63492ff.js";import"./utils-3d35716f.js";import"./isMuiElement-6907f060.js";import"./Select-a4487aaa.js";import"./Menu-5950de0d.js";import"./createSvgIcon-ca656bec.js";import"./SvgIcon-075b1db6.js";import"./OutlinedInput-0cb1099f.js";import"./GlobalStyles-5f9800bb.js";import"./FormHelperText-e428b621.js";import"./faCircleArrowRight-f69b7367.js";import"./faMagnifyingGlass-482fd726.js";import"./index-9681c8ff.js";import"./Box-51bd3ea0.js";import"./extendSxProp-b1abb964.js";import"./FormControlLabel-1ceb9da1.js";import"./Typography-f453bb5c.js";import"./Stack-3fcb8940.js";import"./styled-5c6c15e1.js";import"./Divider-2d957b7a.js";import"./dividerClasses-871b72e6.js";const X=V(R,{name:"AvFeedbackContainer",slot:"SmileButtons"})({}),Y=({disabled:t,Icon:o,label:i,value:r,...n})=>e("div",{children:e(L,{"aria-label":r,value:r,...n,disabled:t,children:e(o,{fontSize:"large"})})}),_=({analytics:t,appName:o,handleClose:i,loading:r,sent:n,setLoading:p,setSent:d})=>{var w;const{control:y,formState:{errors:h},handleSubmit:c,register:C,setValue:F,watch:k}=J(),N=async({smileField:m,...a})=>{p(!0);try{const l=await W.getCurrentRegion();await t.info({surveyId:`${o.replace(/\s/g,"_")}_Smile_Survey`,smileLocation:`${o}`,smile:`icon-${m}`,url:window.location.href,region:l.data.regions[0]&&l.data.regions[0].id,userAgent:window.navigator.userAgent,submitTime:new Date,...a}),d(!0),p(!1)}catch{d(!1),p(!1)}};b.useEffect(()=>{n&&setTimeout(()=>{i()},2e3)},[n]);const S=[{Icon:O,label:"What do you like?",value:"smile"},{Icon:$,label:"What would you improve?",value:"meh"},{Icon:D,label:"What don't you like?",value:"frown"}],A=()=>{const m=k("smileField"),a=S.find(l=>l.value===m);return(a==null?void 0:a.label)||"What would you improve?"};return n?null:u(s,{component:"form",container:!0,justifyContent:"center",onSubmit:c(N),"aria-label":"Feedback Form","aria-describedby":"feedback-form-header",children:[e(K,{control:y,name:"smileField",render:({field:m})=>e(X,{children:S.map((a,l)=>e(Y,{autoFocus:l===0,disabled:r,...a},a.value)),...m,"aria-labelledby":"feedback-form-header",onChange:(a,l)=>{F(m.name,l)},size:"medium",exclusive:!0})}),k("smileField")&&e(G,{...C("feedback",{required:"This field is required",maxLength:{value:200,message:"This field must not exceed 200 characters"}}),fullWidth:!0,multiline:!0,minRows:3,maxRows:3,label:A(),inputProps:{"aria-required":"true"},InputLabelProps:{component:M,required:!0},helperText:((w=h.feedback)==null?void 0:w.message)||"Max 200 characters",error:!!h.feedback,disabled:r}),u(s,{container:!0,direction:"row",marginTop:"16px",spacing:1,children:[e(s,{item:!0,xs:6,children:e(I,{color:"secondary",disabled:r,fullWidth:!0,onClick:i,children:"Cancel"})}),e(s,{item:!0,xs:6,children:e(z,{disabled:!k("smileField"),fullWidth:!0,loading:r,type:"submit",variant:"contained",children:"Send Feedback"})})]})]})};try{_.displayName="FeedbackForm",_.__docgenInfo={description:"",displayName:"FeedbackForm",props:{analytics:{defaultValue:null,description:"",name:"analytics",required:!0,type:{name:"{ info: (entries: Record<string, unknown>) => any; }"}},appName:{defaultValue:null,description:"",name:"appName",required:!0,type:{name:"string"}},handleClose:{defaultValue:null,description:"",name:"handleClose",required:!0,type:{name:"() => void"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},sent:{defaultValue:null,description:"",name:"sent",required:!0,type:{name:"boolean"}},setLoading:{defaultValue:null,description:"",name:"setLoading",required:!0,type:{name:"React.Dispatch<React.SetStateAction<boolean>>"}},setSent:{defaultValue:null,description:"",name:"setSent",required:!0,type:{name:"React.Dispatch<React.SetStateAction<boolean>>"}}}}}catch{}const v=({appName:t,handleClose:o,loading:i,sent:r})=>u(s,{alignItems:"center",container:!0,direction:"row",marginBottom:r?"0px":"8px",justifyContent:"space-between",flexWrap:"nowrap",id:"feedback-form-header",children:[e(s,{item:!0,whiteSpace:"normal",children:e(Q,{component:"h2",variant:"h5",children:r?"Thank you for your feedback.":`Tell us what you think about ${t}`})}),e(s,{item:!0,marginRight:"-8px",children:e(E,{disabled:i,title:"Close",onClick:o,children:e(H,{})})})]});try{v.displayName="FeedbackHeader",v.__docgenInfo={description:"",displayName:"FeedbackHeader",props:{appName:{defaultValue:null,description:"",name:"appName",required:!0,type:{name:"string"}},handleClose:{defaultValue:null,description:"",name:"handleClose",required:!0,type:{name:"() => void"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},sent:{defaultValue:null,description:"",name:"sent",required:!0,type:{name:"boolean"}}}}}catch{}const Z=V(U,{name:"AvFeedbackContainer",slot:"root"})({}),g=({analytics:t=j,appName:o})=>{const[i,r]=b.useState(null),[n,p]=b.useState(!1),[d,y]=b.useState(!1),h=F=>{r(F.currentTarget)},c=()=>{r(null)};return u(B,{children:[e(I,{onClick:h,color:"secondary",size:"large",children:"Give Feedback"}),e(P,{anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{marginTop:"4px"},disableRestoreFocus:!0,onClose:c,open:!!i,transformOrigin:{vertical:"top",horizontal:"right"},children:u(Z,{children:[e(v,{appName:o,handleClose:c,loading:d,sent:n}),e(_,{analytics:t,appName:o,handleClose:c,loading:d,sent:n,setLoading:y,setSent:p})]})})]})};try{g.displayName="Feedback",g.__docgenInfo={description:"",displayName:"Feedback",props:{analytics:{defaultValue:null,description:"",name:"analytics",required:!1,type:{name:"{ info: (entries: any) => any; }"}},appName:{defaultValue:null,description:"",name:"appName",required:!0,type:{name:"string"}}}}}catch{}const vr={title:"Components/Feedback/Feedback",component:g,tags:["autodocs"]},f={render:t=>e(g,{...t}),args:{appName:"This App"}};var x,T,q;f.parameters={...f.parameters,docs:{...(x=f.parameters)==null?void 0:x.docs,source:{originalSource:`{
  render: (args: FeedbackProps) => <Feedback {...args} />,
  args: {
    appName: 'This App'
  }
}`,...(q=(T=f.parameters)==null?void 0:T.docs)==null?void 0:q.source}}};const Cr=["_Feedback"];export{f as _Feedback,Cr as __namedExportsOrder,vr as default};
//# sourceMappingURL=Feedback.stories-8fd49236.js.map
