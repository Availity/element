import{r as l}from"./index-DcWiA9TO.js";import{g as Po,c as X}from"./generateUtilityClass-Bqc1qv72.js";import{i as go}from"./isHostComponent-DVu5iVWx.js";import{g as vo}from"./generateUtilityClasses-DyVAdLaw.js";import{u as Y}from"./useSlot-DO4SmqlR.js";import{j as R}from"./jsx-runtime-CcL-W3nW.js";import{u as yo}from"./DefaultPropsProvider-CIAoFptl.js";import{G as wo}from"./Portal-CKWfQBCE.js";import{o as q}from"./ownerDocument-DW-IO8s5.js";import{o as J}from"./ownerWindow-HkKU3E4x.js";import{d as Eo}from"./debounce-Be36O1Ab.js";import{s as _,c as xo}from"./styled-Dbr85gFc.js";import{u as bo}from"./useForkRef-BVrIj09m.js";import{P as Ro}from"./Paper-CvfFJp8a.js";import{M as To}from"./Modal-CzgY4V0Y.js";function Co(e){return Po("MuiPopover",e)}vo("MuiPopover",["root","paper"]);function K(e,o){let s=0;return typeof o=="number"?s=o:o==="center"?s=e.height/2:o==="bottom"&&(s=e.height),s}function Q(e,o){let s=0;return typeof o=="number"?s=o:o==="center"?s=e.width/2:o==="right"&&(s=e.width),s}function Z(e){return[e.horizontal,e.vertical].map(o=>typeof o=="number"?`${o}px`:o).join(" ")}function T(e){return typeof e=="function"?e():e}const Oo=e=>{const{classes:o}=e;return xo({root:["root"],paper:["paper"]},Co,o)},zo=_(To,{name:"MuiPopover",slot:"Root",overridesResolver:(e,o)=>o.root})({}),Mo=_(Ro,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,o)=>o.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Vo=l.forwardRef(function(o,s){const C=yo({props:o,name:"MuiPopover"}),{action:oo,anchorEl:p,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:O,anchorReference:P="anchorEl",children:to,className:eo,container:ro,elevation:z=8,marginThreshold:i=16,open:f,PaperProps:no={},slots:so={},slotProps:v={},transformOrigin:g={vertical:"top",horizontal:"left"},TransitionComponent:y=wo,transitionDuration:w="auto",TransitionProps:{onEntering:M,...S}={},disableScrollLock:E=!1,...io}=C,u=(v==null?void 0:v.paper)??no,x=l.useRef(),b={...C,anchorOrigin:h,anchorReference:P,elevation:z,marginThreshold:i,externalPaperSlotProps:u,transformOrigin:g,TransitionComponent:y,transitionDuration:w,TransitionProps:S},k=Oo(b),W=l.useCallback(()=>{if(P==="anchorPosition")return O;const t=T(p),n=(t&&t.nodeType===1?t:q(x.current).body).getBoundingClientRect();return{top:n.top+K(n,h.vertical),left:n.left+Q(n,h.horizontal)}},[p,h.horizontal,h.vertical,O,P]),j=l.useCallback(t=>({vertical:K(t,g.vertical),horizontal:Q(t,g.horizontal)}),[g.horizontal,g.vertical]),D=l.useCallback(t=>{const r={width:t.offsetWidth,height:t.offsetHeight},n=j(r);if(P==="none")return{top:null,left:null,transformOrigin:Z(n)};const $=W();let m=$.top-n.vertical,d=$.left-n.horizontal;const F=m+r.height,G=d+r.width,I=J(T(p)),B=I.innerHeight-i,V=I.innerWidth-i;if(i!==null&&m<i){const a=m-i;m-=a,n.vertical+=a}else if(i!==null&&F>B){const a=F-B;m-=a,n.vertical+=a}if(i!==null&&d<i){const a=d-i;d-=a,n.horizontal+=a}else if(G>V){const a=G-V;d-=a,n.horizontal+=a}return{top:`${Math.round(m)}px`,left:`${Math.round(d)}px`,transformOrigin:Z(n)}},[p,P,W,j,i]),[ao,H]=l.useState(f),c=l.useCallback(()=>{const t=x.current;if(!t)return;const r=D(t);r.top!==null&&t.style.setProperty("top",r.top),r.left!==null&&(t.style.left=r.left),t.style.transformOrigin=r.transformOrigin,H(!0)},[D]);l.useEffect(()=>(E&&window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)),[p,E,c]);const lo=(t,r)=>{M&&M(t,r),c()},po=()=>{H(!1)};l.useEffect(()=>{f&&c()}),l.useImperativeHandle(oo,()=>f?{updatePosition:()=>{c()}}:null,[f,c]),l.useEffect(()=>{if(!f)return;const t=Eo(()=>{c()}),r=J(p);return r.addEventListener("resize",t),()=>{t.clear(),r.removeEventListener("resize",t)}},[p,f,c]);let L=w;w==="auto"&&!y.muiSupportAuto&&(L=void 0);const co=ro||(p?q(T(p)).body:void 0),A={slots:so,slotProps:{...v,paper:u}},[fo,N]=Y("paper",{elementType:Mo,externalForwardedProps:A,additionalProps:{elevation:z,className:X(k.paper,u==null?void 0:u.className),style:ao?u.style:{...u.style,opacity:0}},ownerState:b}),[U,{slotProps:uo,...mo}]=Y("root",{elementType:zo,externalForwardedProps:A,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:co,open:f},ownerState:b,className:X(k.root,eo)}),ho=bo(x,N.ref);return R.jsx(U,{...mo,...!go(U)&&{slotProps:uo,disableScrollLock:E},...io,ref:s,children:R.jsx(y,{appear:!0,in:f,onEntering:lo,onExited:po,timeout:L,...S,children:R.jsx(fo,{...N,ref:ho,children:to})})})});export{Vo as P,Mo as a};
