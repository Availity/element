import{r as p,as as g,j as i,al as z}from"./iframe-BACK_0qL.js";import{T as P}from"./index-44F_PwAA.js";import{u as R,l as E,i as S,a as Q,E as Z,e as H,M as ee,c as te,b as ae,d as ie,f as ne,g as re,h as se,j as N,T as le}from"./TreeItem-DX-kOmCA.js";import{g as oe}from"./generateUtilityClass-BtcU_pBl.js";import{g as de}from"./generateUtilityClasses-DDbjFgb8.js";import{u as G}from"./useSlotProps-DdDv6txA.js";import{f as me}from"./fastObjectShallowCompare-DvmlZRcg.js";import{u as h}from"./EventManager-CsimkG9r.js";import{T as ce}from"./Typography-Bcc0vKQ7.js";import{A as ue}from"./Alert-Xa7hBB6I.js";import{s as pe,c as he}from"./styled-CILYMfR2.js";import"./preload-helper-PPVm8Dsz.js";import"./index-CThJnamY.js";import"./faCircleArrowRight-DD93uDiF.js";import"./faUser-5enrXuLZ.js";import"./SvgIcon-BWD4KGVI.js";import"./memoTheme-CehCTkMp.js";import"./mergeSlotProps-Ce5vEJyz.js";import"./createSvgIcon-BJ8pbv3g.js";import"./Checkbox-B-JZ3L4a.js";import"./SwitchBase-BSY6ujsV.js";import"./useFormControl-BhxRA0Wm.js";import"./useSlot-4KwJ1ZEX.js";import"./useForkRef-COVhBD0c.js";import"./useControlled-Bvcrhgjz.js";import"./ButtonBase-CDXMi9Z2.js";import"./useTimeout-Bbnn395Q.js";import"./TransitionGroupContext-B4j_r9NY.js";import"./useEventCallback-B1QjfuHc.js";import"./isFocusVisible-B8k4qzLc.js";import"./createSimplePaletteValueFilter-bm0fmN_7.js";import"./mergeSlotProps-Bu0K3qzP.js";import"./CircularProgress-BxeLfgty.js";import"./Collapse-BKX2hapK.js";import"./useTheme-CAH-7WS1.js";import"./utils-CTnKgbLp.js";import"./Close-DONNORYt.js";import"./IconButton-fOR7z52u.js";import"./Paper-DbocNi97.js";const be=({props:t})=>{const{store:e}=R(),{label:n,itemId:r}=t,[o,l]=p.useState(n),d=h(e,E.isItemEditable,r),m=h(e,E.isItemBeingEdited,r);return p.useEffect(()=>{m||l(n)},[m,n]),{propsEnhancers:{label:()=>({editable:d}),labelInput:({externalEventHandlers:c,interactions:s})=>d?{value:o??"","data-element":"labelInput",onChange:a=>{c.onChange?.(a),l(a.target.value)},onKeyDown:a=>{if(c.onKeyDown?.(a),a.defaultMuiPrevented)return;const f=a.target;a.key==="Enter"&&f.value?s.handleSaveItemLabel(a,f.value):a.key==="Escape"&&s.handleCancelItemLabelEditing(a)},onBlur:a=>{c.onBlur?.(a),!a.defaultMuiPrevented&&a.target.value&&s.handleSaveItemLabel(a,a.target.value)},autoFocus:!0,type:"text"}:{}}}};class fe{constructor(e){this.store=e,e.itemPluginManager.register(be,null)}buildPublicAPI=()=>({setEditedItem:this.setEditedItem,updateItemLabel:this.updateItemLabel});setEditedItem=e=>{e!==null&&!E.isItemEditable(this.store.state,e)||this.store.set("editedItemId",e)};updateItemLabel=(e,n)=>{if(!n)throw new Error(["MUI X: The Tree View component requires all items to have a `label` property.","The label of an item cannot be empty.",e].join(`
`));const r=this.store.state.itemMetaLookup[e];r.label!==n&&(this.store.set("itemMetaLookup",g({},this.store.state.itemMetaLookup,{[e]:g({},r,{label:n})})),this.store.parameters.onItemLabelChange&&this.store.parameters.onItemLabelChange(e,n))}}function ge(t){return oe("MuiRichTreeView",t)}de("MuiRichTreeView",["root","item","itemContent","itemGroupTransition","itemIconContainer","itemLabel","itemCheckbox","itemLabelInput"]);const Ie=["ownerState"],$=p.createContext(null),Te=()=>Z,ye=t=>S.itemOrderedChildrenIds(t,null),we=p.memo(function({itemSlot:e,itemSlotProps:n,itemId:r,skipChildren:o}){const l=p.useContext($),{store:d}=R(),m=h(d,S.itemMeta,r),c=h(d,o?Te:S.itemOrderedChildrenIds,r),s=e??Q,u=G({elementType:s,externalSlotProps:n,additionalProps:{label:m?.label,id:m?.idAttribute,itemId:r},ownerState:{itemId:r,label:m?.label}}),b=z(u,Ie);return i.jsx(s,g({},b,{children:c?.map(l)}))},me);function Se(t){const{slots:e,slotProps:n}=t,{store:r}=R(),o=e?.item,l=n?.item,d=h(r,S.domStructure),m=h(r,d==="flat"?H.flatList:ye),c=d==="flat",s=p.useCallback(u=>i.jsx(we,{itemSlot:o,itemSlotProps:l,itemId:u,skipChildren:c},u),[o,l,c]);return i.jsx($.Provider,{value:s,children:m.map(s)})}const Ve=["apiRef","slots","slotProps","disabledItemsFocusable","items","isItemDisabled","isItemSelectionDisabled","getItemLabel","getItemChildren","getItemId","onItemClick","itemChildrenIndentation","id","expandedItems","defaultExpandedItems","onExpandedItemsChange","onItemExpansionToggle","expansionTrigger","disableSelection","selectedItems","defaultSelectedItems","multiSelect","checkboxSelection","selectionPropagation","onSelectedItemsChange","onItemSelectionToggle","onItemFocus","onItemLabelChange","isItemEditable"];function xe(t){const{apiRef:e,slots:n,slotProps:r,disabledItemsFocusable:o,items:l,isItemDisabled:d,isItemSelectionDisabled:m,getItemLabel:c,getItemChildren:s,getItemId:u,onItemClick:b,itemChildrenIndentation:T,id:a,expandedItems:f,defaultExpandedItems:y,onExpandedItemsChange:w,onItemExpansionToggle:V,expansionTrigger:k,disableSelection:L,selectedItems:q,defaultSelectedItems:j,multiSelect:M,checkboxSelection:_,selectionPropagation:F,onSelectedItemsChange:A,onItemSelectionToggle:B,onItemFocus:U,onItemLabelChange:O,isItemEditable:W}=t,X=z(t,Ve),J=p.useMemo(()=>({disabledItemsFocusable:o,items:l,isItemDisabled:d,isItemSelectionDisabled:m,getItemLabel:c,getItemChildren:s,getItemId:u,onItemClick:b,itemChildrenIndentation:T,id:a,expandedItems:f,defaultExpandedItems:y,onExpandedItemsChange:w,onItemExpansionToggle:V,expansionTrigger:k,disableSelection:L,selectedItems:q,defaultSelectedItems:j,multiSelect:M,checkboxSelection:_,selectionPropagation:F,onSelectedItemsChange:A,onItemSelectionToggle:B,onItemFocus:U,onItemLabelChange:O,isItemEditable:W}),[o,l,d,m,c,s,u,b,T,a,f,y,w,V,k,L,q,j,M,_,F,A,B,U,O,W]);return{apiRef:e,slots:n,slotProps:r,parameters:J,forwardedProps:X}}const K=t=>({isItemEditable:t.isItemEditable??!1}),Y={getInitialState:(t,e)=>g({},t,K(e),{editedItemId:null,lazyLoadedItems:null}),updateStateFromParameters:(t,e)=>g({},t,K(e)),shouldIgnoreItemsStateUpdate:()=>!1};class ve extends ee{labelEditing=new fe(this);static rawMapper=Y;buildPublicAPI(){return g({},super.buildPublicAPI(),this.labelEditing.buildPublicAPI())}}class Ce extends ve{constructor(e){super(e,"RichTreeView",Y)}}const Ee=te(),Pe=t=>{const{classes:e}=t;return p.useMemo(()=>he({root:["root"],item:["item"],itemContent:["itemContent"],itemGroupTransition:["itemGroupTransition"],itemIconContainer:["itemIconContainer"],itemLabel:["itemLabel"],itemLabelInput:["itemLabelInput"],itemCheckbox:["itemCheckbox"]},ge,e),[e])},Re=pe("ul",{name:"MuiRichTreeView",slot:"Root"})({padding:0,margin:0,listStyle:"none",outline:0,position:"relative"}),De=p.forwardRef(function(e,n){const r=Ee({props:e,name:"MuiRichTreeView"}),{slots:o,slotProps:l,apiRef:d,parameters:m,forwardedProps:c}=xe(r),s=ae(Ce,m),u=p.useRef(null),b=ie(n,u),T=ne(s,c,b),a=Pe(r),f=h(s,N.isItemLoading,null),y=h(s,N.itemError,null),w=o?.root??Re,V=G({elementType:w,externalSlotProps:l?.root,className:a.root,getSlotProps:T,ownerState:r});return f?i.jsx(ce,{children:"Loading..."}):y?i.jsx(ue,{severity:"error",children:y.message}):i.jsx(re,{store:s,classes:a,slots:o,slotProps:l,apiRef:d,rootRef:u,children:i.jsx(se.Provider,{value:S.itemDepth,children:i.jsx(w,g({},V,{children:i.jsx(Se,{slots:o,slotProps:l})}))})})}),I=({children:t,slots:e,...n})=>i.jsx(De,{...n,slots:{...e,item:le},children:t});try{I.displayName="DynamicTreeView",I.__docgenInfo={description:"",displayName:"DynamicTreeView",props:{slots:{defaultValue:{value:"{}"},description:"Overridable component slots.",name:"slots",required:!1,type:{name:"RichTreeViewSlots"}},slotProps:{defaultValue:{value:"{}"},description:"The props used for each component slot.",name:"slotProps",required:!1,type:{name:"RichTreeViewSlotProps<TreeViewBaseItem, true>"}},apiRef:{defaultValue:null,description:"The ref object that allows Tree View manipulation. Can be instantiated with `useRichTreeViewApiRef()`.",name:"apiRef",required:!1,type:{name:"RichTreeViewApiRef<any, any>"}},id:{defaultValue:null,description:`This prop is used to help implement the accessibility logic.
If you don't provide this prop. It falls back to a randomly generated id.`,name:"id",required:!1,type:{name:"string"}},onItemClick:{defaultValue:null,description:"Callback fired when the `content` slot of a given Tree Item is clicked.\n@param event The DOM event that triggered the change.\n@param itemId The id of the focused item.",name:"onItemClick",required:!1,type:{name:"(event: MouseEvent<Element, MouseEvent>, itemId: string) => void"}},disabledItemsFocusable:{defaultValue:{value:"false"},description:"Whether the items should be focusable when disabled.",name:"disabledItemsFocusable",required:!1,type:{name:"boolean"}},onItemLabelChange:{defaultValue:null,description:`Callback fired when the label of an item changes.
@param itemId The id of the item that was edited.
@param newLabel The new label of the items.`,name:"onItemLabelChange",required:!1,type:{name:"(itemId: string, newLabel: string) => void"}},isItemEditable:{defaultValue:{value:"() => false"},description:`Determine if a given item can be edited.
@template R
@param item The item to check.
@returns \`true\` if the item can be edited.`,name:"isItemEditable",required:!1,type:{name:"boolean | ((item: TreeViewBaseItem) => boolean)"}},items:{defaultValue:null,description:"",name:"items",required:!0,type:{name:"readonly TreeViewBaseItem[]"}},isItemDisabled:{defaultValue:null,description:`Used to determine if a given item should be disabled.
@template R
@param item The item to check.
@returns \`true\` if the item should be disabled.`,name:"isItemDisabled",required:!1,type:{name:"(item: TreeViewBaseItem) => boolean"}},isItemSelectionDisabled:{defaultValue:null,description:`Used to determine if a given item should have selection disabled.
@template R
@param item The item to check.
@returns \`true\` if the item should have selection disabled.`,name:"isItemSelectionDisabled",required:!1,type:{name:"(item: TreeViewBaseItem) => boolean"}},getItemLabel:{defaultValue:{value:"(item) => item.label"},description:`Used to determine the string label for a given item.
@template R
@param item The item to check.
@returns The label of the item.`,name:"getItemLabel",required:!1,type:{name:"(item: TreeViewBaseItem) => string"}},getItemChildren:{defaultValue:{value:"(item) => item.children"},description:`Used to determine the children of a given item.
@template R
@param item The item to check.
@returns The children of the item.`,name:"getItemChildren",required:!1,type:{name:"(item: TreeViewBaseItem) => TreeViewBaseItem[]"}},getItemId:{defaultValue:{value:"(item) => item.id"},description:`Used to determine the id of a given item.
@template R
@param item The item to check.
@returns The id of the item.`,name:"getItemId",required:!1,type:{name:"(item: TreeViewBaseItem) => string"}},itemChildrenIndentation:{defaultValue:{value:"12px"},description:`Horizontal indentation between an item and its children.
Examples: 24, "24px", "2rem", "2em".`,name:"itemChildrenIndentation",required:!1,type:{name:"string | number"}},expandedItems:{defaultValue:null,description:`Expanded item ids.
Used when the item's expansion is controlled.`,name:"expandedItems",required:!1,type:{name:"readonly string[]"}},defaultExpandedItems:{defaultValue:{value:"[]"},description:`Expanded item ids.
Used when the item's expansion is not controlled.`,name:"defaultExpandedItems",required:!1,type:{name:"readonly string[]"}},onExpandedItemsChange:{defaultValue:null,description:"Callback fired when Tree Items are expanded/collapsed.\n@param event The DOM event that triggered the change. Can be null when the change is caused by the `publicAPI.setItemExpansion()` method.\n@param itemIds The ids of the expanded items.",name:"onExpandedItemsChange",required:!1,type:{name:"(event: SyntheticEvent<Element, Event>, itemIds: string[]) => void"}},onItemExpansionToggle:{defaultValue:null,description:"Callback fired when a Tree Item is expanded or collapsed.\n@param event The DOM event that triggered the change. Can be null when the change is caused by the `publicAPI.setItemExpansion()` method.\n@param itemId The itemId of the modified item.\n@param isExpanded `true` if the item has just been expanded, `false` if it has just been collapsed.",name:"onItemExpansionToggle",required:!1,type:{name:"(event: SyntheticEvent<Element, Event>, itemId: string, isExpanded: boolean) => void"}},expansionTrigger:{defaultValue:{value:"'content'"},description:"The slot that triggers the item's expansion when clicked.",name:"expansionTrigger",required:!1,type:{name:'"content" | "iconContainer"'}},disableSelection:{defaultValue:{value:"false"},description:"Whether selection is disabled.",name:"disableSelection",required:!1,type:{name:"boolean"}},selectedItems:{defaultValue:null,description:"Selected item ids. (Controlled)\nWhen `multiSelect` is true this takes an array of strings; when false (default) a string.",name:"selectedItems",required:!1,type:{name:"readonly string[]"}},defaultSelectedItems:{defaultValue:{value:"[]"},description:"Selected item ids. (Uncontrolled)\nWhen `multiSelect` is true this takes an array of strings; when false (default) a string.",name:"defaultSelectedItems",required:!1,type:{name:"readonly string[]"}},multiSelect:{defaultValue:{value:"false"},description:"Whether multiple items can be selected.",name:"multiSelect",required:!1,type:{name:"true"}},checkboxSelection:{defaultValue:{value:"false"},description:"Whether the Tree View renders a checkbox at the left of its label that allows selecting it.",name:"checkboxSelection",required:!1,type:{name:"boolean"}},selectionPropagation:{defaultValue:{value:"{ parents: false, descendants: false }"},description:"When `selectionPropagation.descendants` is set to `true`.\n\n- Selecting a parent selects all its descendants automatically.\n- Deselecting a parent deselects all its descendants automatically.\n\nWhen `selectionPropagation.parents` is set to `true`.\n\n- Selecting all the descendants of a parent selects the parent automatically.\n- Deselecting a descendant of a selected parent deselects the parent automatically.\n\nOnly works when `multiSelect` is `true`.\nOn the <SimpleTreeView />, only the expanded items are considered (since the collapsed item are not passed to the Tree View component at all)",name:"selectionPropagation",required:!1,type:{name:"TreeViewSelectionPropagation"}},onSelectedItemsChange:{defaultValue:null,description:"Callback fired when Tree Items are selected/deselected.\n@param event The DOM event that triggered the change. Can be null when the change is caused by the `publicAPI.setItemSelection()` method.\n@param itemIds The ids of the selected items.\nWhen `multiSelect` is `true`, this is an array of strings; when false (default) a string.",name:"onSelectedItemsChange",required:!1,type:{name:"(event: SyntheticEvent<Element, Event>, itemIds: string[]) => void"}},onItemSelectionToggle:{defaultValue:null,description:"Callback fired when a Tree Item is selected or deselected.\n@param event The DOM event that triggered the change. Can be null when the change is caused by the `publicAPI.setItemSelection()` method.\n@param itemId The itemId of the modified item.\n@param isSelected `true` if the item has just been selected, `false` if it has just been deselected.",name:"onItemSelectionToggle",required:!1,type:{name:"(event: SyntheticEvent<Element, Event>, itemId: string, isSelected: boolean) => void"}},onItemFocus:{defaultValue:null,description:`Callback fired when a given Tree Item is focused.
@param event The DOM event that triggered the change. **Warning**: This is a generic event not a focus event.
@param itemId The id of the focused item.`,name:"onItemFocus",required:!1,type:{name:"(event: SyntheticEvent<Element, Event>, itemId: string) => void"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},classes:{defaultValue:null,description:"Override or extend the styles applied to the component.",name:"classes",required:!1,type:{name:"Partial<RichTreeViewClasses>"}},sx:{defaultValue:null,description:"The system prop that allows defining system overrides as well as additional CSS styles.",name:"sx",required:!1,type:{name:"SxProps<Theme>"}}}}}catch{}const ft={title:"Components/TreeView/DynamicTreeView",component:I,tags:["autodocs"],parameters:{docs:{description:{component:"The `DynamicTreeView` receives its items via an `items` prop, making it easier\nto dynamically load them from an external source. Furthermore,\n`DynamicTreeView` includes the ability to make the `TreeItem`'s editable."}}}},D=[{id:"tree-1",label:"Tree 1",children:[{id:"sub-tree-1.1",label:"Sub Tree 1.1",children:[{id:"sub-tree-1.1.1",label:"Sub Tree 1.1.1"}]},{id:"sub-tree-1.2",label:"Sub Tree 1.2"},{id:"sub-tree-1.3",label:"Sub Tree 1.3"}]},{id:"tree-2",label:"Tree 2",children:[{id:"sub-tree-2.1",label:"Sub Tree 2.1"},{id:"sub-tree-2.2",label:"Sub Tree 2.2"}]},{id:"tree-3",label:"Tree 3",children:[{id:"sub-tree-3.1",label:"Sub Tree 3.1"}]},{id:"tree-4",label:"Tree 4",children:[{id:"sub-tree-4.1",label:"Sub Tree 4.1"}]}],x={render:t=>i.jsxs(i.Fragment,{children:[i.jsx(P,{variant:"h1",children:"Selectable Dynamic Tree",id:"dynamic-tree"}),i.jsx(I,{...t})]}),args:{items:D,"aria-labelledby":"dynamic-tree"}},v={render:t=>i.jsxs(i.Fragment,{children:[i.jsx(P,{variant:"h1",children:"Selectable Dynamic Tree",id:"dynamic-tree-selectable"}),i.jsx(I,{...t})]}),args:{items:D,checkboxSelection:!0,"aria-labelledby":"dynamic-tree-selectable"}},C={render:t=>i.jsxs(i.Fragment,{children:[i.jsx(P,{variant:"h1",children:"Editable Dynamic Tree",id:"dynamic-tree-editable"}),i.jsx(I,{...t})]}),args:{items:D,isItemEditable:!0,"aria-labelledby":"dynamic-tree-editable"}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  render: (args: DynamicTreeViewProps) => <>
      <Typography variant="h1" children="Selectable Dynamic Tree" id="dynamic-tree" />
      <DynamicTreeView {...args} />
    </>,
  args: {
    items,
    'aria-labelledby': 'dynamic-tree'
  }
}`,...x.parameters?.docs?.source}}};v.parameters={...v.parameters,docs:{...v.parameters?.docs,source:{originalSource:`{
  render: (args: DynamicTreeViewProps) => <>
      <Typography variant="h1" children="Selectable Dynamic Tree" id="dynamic-tree-selectable" />
      <DynamicTreeView {...args} />
    </>,
  args: {
    items,
    checkboxSelection: true,
    'aria-labelledby': 'dynamic-tree-selectable'
  }
}`,...v.parameters?.docs?.source}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  render: (args: DynamicTreeViewProps) => <>
      <Typography variant="h1" children="Editable Dynamic Tree" id="dynamic-tree-editable" />
      <DynamicTreeView {...args} />
    </>,
  args: {
    items,
    isItemEditable: true,
    'aria-labelledby': 'dynamic-tree-editable'
  }
}`,...C.parameters?.docs?.source}}};const gt=["_DynamicTreeView","_DynamicTreeViewCheckbox","_DynamicTreeViewEditable"];export{x as _DynamicTreeView,v as _DynamicTreeViewCheckbox,C as _DynamicTreeViewEditable,gt as __namedExportsOrder,ft as default};
