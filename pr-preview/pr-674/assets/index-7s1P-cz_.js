import{r as a}from"./index-DcWiA9TO.js";import{j as i}from"./jsx-runtime-CcL-W3nW.js";import{s as l}from"./styled-wZqJTO_n.js";import{C as M}from"./CircularProgress-D2topXWR.js";var T=Object.defineProperty,S=Object.defineProperties,V=Object.getOwnPropertyDescriptors,g=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable,k=(e,t,o)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,H=(e,t)=>{for(var o in t||(t={}))O.call(t,o)&&k(e,o,t[o]);if(g)for(var o of g(t))C.call(t,o)&&k(e,o,t[o]);return e},L=(e,t)=>S(e,V(t)),z=(e,t)=>{var o={};for(var n in e)O.call(e,n)&&t.indexOf(n)<0&&(o[n]=e[n]);if(e!=null&&g)for(var n of g(e))t.indexOf(n)<0&&C.call(e,n)&&(o[n]=e[n]);return o},A=()=>i.jsx(M,{"aria-label":"Loading",variant:"indeterminate"}),F=l("div")({position:"relative"}),N=l("div")({position:"absolute",zIndex:1010,top:0,right:0,bottom:0,left:0,height:"100%",minHeight:"4.5em",cursor:"wait",overflow:"hidden",":focus":{outline:"none"}}),W=l("div")({width:"100%",height:"100%",opacity:"0.88",filter:"alpha(opacity=50)",backgroundColor:"white"}),Y=l("div")(({top:e="50%"})=>({top:e,position:"absolute",left:0,right:0,textAlign:"center",transform:"translateY(-50%)",zIndex:10001})),$=l("div")({color:"#333",background:"none",zIndex:"1011"}),j=l("div")({position:"absolute",width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:0});function X(e){var t=e,{backdropColor:o="paper",blocking:n,children:R,keepInView:b,loader:x=i.jsx(A,{}),message:_,renderChildren:B=!0}=t,P=z(t,["backdropColor","blocking","children","keepInView","loader","message","renderChildren"]);const[f,y]=a.useState("50%"),c=a.useRef(null),d=a.useRef(null),v=a.useRef(null),m=a.useRef(null),w=a.useCallback(()=>{if(n&&b&&v.current){const r=v.current.getBoundingClientRect(),u=window.innerHeight;if(r.top>u||r.bottom<0)return;if(r.top>=0&&r.bottom<=u){f!=="50%"&&y("50%");return}const h=m.current?m.current.getBoundingClientRect().height:0;let s=Math.max(Math.min(u,r.bottom)-Math.max(r.top,0),h)/2;r.top<0&&(s=Math.min(s-r.top,r.height-h/2)),f!==s&&y(s)}},[n,b,f]);a.useEffect(()=>(window.addEventListener("scroll",w),()=>{window.removeEventListener("scroll",w)}),[w]);const p=(r,u=!1)=>{const{key:h,shiftKey:s}=r;return n&&h==="Tab"&&s===u},I=r=>{c.current&&p(r)&&c.current.focus()},U=r=>{c.current&&p(r)&&(r.preventDefault(),c.current.focus())},D=r=>{d.current&&p(r,!0)&&d.current.focus()},E=r=>{d.current&&p(r,!0)&&(r.preventDefault(),d.current.focus())},K=!n||B;return i.jsxs(F,L(H({"aria-busy":n},P),{children:[n?i.jsx(j,{tabIndex:0,onKeyUp:I,onKeyDown:U,ref:d,children:_||"loading"}):null,K?R:null,n?i.jsxs(N,{tabIndex:0,ref:c,onKeyUp:D,onKeyDown:E,children:[i.jsx(W,{ref:v,sx:{backgroundColor:`background.${o}`}}),i.jsx(Y,{ref:m,top:b?f:void 0,children:i.jsxs($,{children:[a.isValidElement(x)?i.jsx("div",{"aria-hidden":!0,children:x}):null,_||i.jsx(j,{children:"loading"})]})})]}):null]}))}export{X as B};
