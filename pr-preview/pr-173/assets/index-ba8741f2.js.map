{"version":3,"file":"index-ba8741f2.js","sources":["../../../packages/feedback/dist/index.mjs"],"sourcesContent":["// src/lib/Feedback.tsx\nimport { useState } from \"react\";\nimport { Popover } from \"@availity/mui-popover\";\nimport { Button as Button2 } from \"@availity/mui-button\";\nimport { Container, styled as styled2 } from \"@mui/material\";\nimport { avLogMessagesApi } from \"@availity/api-axios\";\n\n// src/lib/FeedbackForm.tsx\nimport { useEffect } from \"react\";\nimport { TextField } from \"@availity/mui-textfield\";\nimport { LoadingButton, Button } from \"@availity/mui-button\";\nimport { ToggleButtonGroup, ToggleButton } from \"@availity/mui-toggle-button\";\nimport { Grid, styled } from \"@mui/material\";\nimport { FaceFrownIcon, FaceNeutralIcon, FaceSmileIcon } from \"@availity/mui-icon\";\nimport { FormLabel } from \"@availity/mui-form-utils\";\nimport { avRegionsApi } from \"@availity/api-axios\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar SmileButtons = styled(ToggleButtonGroup, { name: \"AvFeedbackContainer\", slot: \"SmileButtons\" })({});\nvar SmileButton = ({ disabled, Icon, label, value, ...props }) => /* @__PURE__ */ jsx(\"div\", {\n  children: /* @__PURE__ */ jsx(ToggleButton, {\n    \"aria-label\": value,\n    value,\n    ...props,\n    disabled,\n    children: /* @__PURE__ */ jsx(Icon, {\n      fontSize: \"large\"\n    })\n  })\n});\nvar FeedbackForm = ({\n  analytics,\n  appName,\n  handleClose,\n  loading,\n  sent,\n  setLoading,\n  setSent\n}) => {\n  var _a;\n  const {\n    control,\n    formState: { errors },\n    handleSubmit,\n    register,\n    setValue,\n    watch\n  } = useForm();\n  const onSubmit = async ({ smileField, ...values }) => {\n    setLoading(true);\n    try {\n      const response = await avRegionsApi.getCurrentRegion();\n      await analytics.info({\n        surveyId: `${appName.replace(/\\s/g, \"_\")}_Smile_Survey`,\n        smileLocation: `${appName}`,\n        smile: `icon-${smileField}`,\n        url: window.location.href,\n        region: response.data.regions[0] && response.data.regions[0].id,\n        userAgent: window.navigator.userAgent,\n        submitTime: new Date(),\n        ...values\n      });\n      setSent(true);\n      setLoading(false);\n    } catch {\n      setSent(false);\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (sent) {\n      setTimeout(() => {\n        handleClose();\n      }, 2e3);\n    }\n  }, [sent]);\n  const options = [\n    {\n      Icon: FaceSmileIcon,\n      label: \"What do you like?\",\n      value: \"smile\"\n    },\n    {\n      Icon: FaceNeutralIcon,\n      label: \"What would you improve?\",\n      value: \"meh\"\n    },\n    { Icon: FaceFrownIcon, label: \"What don't you like?\", value: \"frown\" }\n  ];\n  const smileFieldValue = watch(\"smileField\");\n  const getFeedbackLabel = () => {\n    const option = options.find((option2) => option2.value === smileFieldValue);\n    return (option == null ? void 0 : option.label) || \"What would you improve?\";\n  };\n  if (!sent) {\n    return /* @__PURE__ */ jsxs(Grid, {\n      component: \"form\",\n      container: true,\n      justifyContent: \"center\",\n      onSubmit: handleSubmit(onSubmit),\n      \"aria-label\": \"Feedback Form\",\n      \"aria-describedby\": \"feedback-form-header\",\n      children: [\n        /* @__PURE__ */ jsx(Controller, {\n          control,\n          name: \"smileField\",\n          render: ({ field }) => {\n            return /* @__PURE__ */ jsx(SmileButtons, {\n              children: options.map((props, index) => /* @__PURE__ */ jsx(SmileButton, {\n                autoFocus: index === 0,\n                disabled: loading,\n                ...props\n              }, props.value)),\n              ...field,\n              \"aria-labelledby\": \"feedback-form-header\",\n              onChange: (event, value) => {\n                setValue(field.name, value);\n              },\n              size: \"medium\",\n              exclusive: true\n            });\n          }\n        }),\n        smileFieldValue && /* @__PURE__ */ jsx(TextField, {\n          ...register(\"feedback\", {\n            required: \"This field is required\",\n            maxLength: { value: 200, message: \"This field must not exceed 200 characters\" }\n          }),\n          fullWidth: true,\n          multiline: true,\n          minRows: 3,\n          maxRows: 3,\n          label: getFeedbackLabel(),\n          inputProps: { \"aria-required\": \"true\" },\n          InputLabelProps: {\n            component: FormLabel,\n            required: true\n          },\n          helperText: ((_a = errors.feedback) == null ? void 0 : _a.message) || \"Max 200 characters\",\n          error: !!errors.feedback,\n          disabled: loading\n        }),\n        /* @__PURE__ */ jsxs(Grid, {\n          container: true,\n          direction: \"row\",\n          marginTop: \"16px\",\n          spacing: 1,\n          children: [\n            /* @__PURE__ */ jsx(Grid, {\n              item: true,\n              xs: 6,\n              children: /* @__PURE__ */ jsx(Button, {\n                color: \"secondary\",\n                disabled: loading,\n                fullWidth: true,\n                onClick: handleClose,\n                children: \"Cancel\"\n              })\n            }),\n            /* @__PURE__ */ jsx(Grid, {\n              item: true,\n              xs: 6,\n              children: /* @__PURE__ */ jsx(LoadingButton, {\n                disabled: !smileFieldValue,\n                fullWidth: true,\n                loading,\n                type: \"submit\",\n                variant: \"contained\",\n                children: \"Send Feedback\"\n              })\n            })\n          ]\n        })\n      ]\n    });\n  } else {\n    return null;\n  }\n};\n\n// src/lib/FeedbackHeader.tsx\nimport { IconButton } from \"@availity/mui-button\";\nimport { CloseIcon } from \"@availity/mui-icon\";\nimport { Typography } from \"@availity/mui-typography\";\nimport { Grid as Grid2 } from \"@mui/material\";\nimport { jsx as jsx2, jsxs as jsxs2 } from \"react/jsx-runtime\";\nvar FeedbackHeader = ({ appName, handleClose, loading, sent }) => {\n  return /* @__PURE__ */ jsxs2(Grid2, {\n    alignItems: \"center\",\n    container: true,\n    direction: \"row\",\n    marginBottom: !sent ? \"8px\" : \"0px\",\n    justifyContent: \"space-between\",\n    flexWrap: \"nowrap\",\n    id: \"feedback-form-header\",\n    children: [\n      /* @__PURE__ */ jsx2(Grid2, {\n        item: true,\n        whiteSpace: \"normal\",\n        children: /* @__PURE__ */ jsx2(Typography, {\n          component: \"h2\",\n          variant: \"h5\",\n          children: sent ? \"Thank you for your feedback.\" : `Tell us what you think about ${appName}`\n        })\n      }),\n      /* @__PURE__ */ jsx2(Grid2, {\n        item: true,\n        marginRight: \"-8px\",\n        children: /* @__PURE__ */ jsx2(IconButton, {\n          disabled: loading,\n          title: \"Close\",\n          onClick: handleClose,\n          children: /* @__PURE__ */ jsx2(CloseIcon, {})\n        })\n      })\n    ]\n  });\n};\n\n// src/lib/Feedback.tsx\nimport { Fragment, jsx as jsx3, jsxs as jsxs3 } from \"react/jsx-runtime\";\nvar FeedbackContainer = styled2(Container, { name: \"AvFeedbackContainer\", slot: \"root\" })({});\nvar Feedback = ({ analytics = avLogMessagesApi, appName }) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [sent, setSent] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const handlePopoverOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n    setSent(false);\n  };\n  const handlePopoverClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n  return /* @__PURE__ */ jsxs3(Fragment, {\n    children: [\n      /* @__PURE__ */ jsx3(Button2, {\n        onClick: handlePopoverOpen,\n        color: \"secondary\",\n        size: \"large\",\n        children: \"Give Feedback\"\n      }),\n      /* @__PURE__ */ jsx3(Popover, {\n        anchorEl,\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"right\"\n        },\n        sx: { marginTop: \"4px\" },\n        disableRestoreFocus: true,\n        onClose: handlePopoverClose,\n        open,\n        transformOrigin: {\n          vertical: \"top\",\n          horizontal: \"right\"\n        },\n        children: /* @__PURE__ */ jsxs3(FeedbackContainer, {\n          children: [\n            /* @__PURE__ */ jsx3(FeedbackHeader, {\n              appName,\n              handleClose: handlePopoverClose,\n              loading,\n              sent\n            }),\n            /* @__PURE__ */ jsx3(FeedbackForm, {\n              analytics,\n              appName,\n              handleClose: handlePopoverClose,\n              loading,\n              sent,\n              setLoading,\n              setSent\n            })\n          ]\n        })\n      })\n    ]\n  });\n};\nexport {\n  Feedback\n};\n"],"names":["SmileButtons","styled","ToggleButtonGroup","SmileButton","disabled","Icon","label","value","props","jsx","ToggleButton","FeedbackForm","analytics","appName","handleClose","loading","sent","setLoading","setSent","_a","control","errors","handleSubmit","register","setValue","watch","useForm","onSubmit","smileField","values","response","avRegionsApi","useEffect","options","FaceSmileIcon","FaceNeutralIcon","FaceFrownIcon","smileFieldValue","getFeedbackLabel","option","option2","jsxs","Grid","Controller","field","index","event","TextField","FormLabel","Button","LoadingButton","FeedbackHeader","jsxs2","Grid2","jsx2","Typography","IconButton","CloseIcon","FeedbackContainer","styled2","Container","Feedback","avLogMessagesApi","anchorEl","setAnchorEl","useState","handlePopoverOpen","handlePopoverClose","jsxs3","Fragment","jsx3","Button2","Popover"],"mappings":"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"}