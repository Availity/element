function M(){return{onFetch:e=>{e.fetchFn=()=>{var n,i,F,N,q,$;const d=(n=e.fetchOptions)==null||(i=n.meta)==null?void 0:i.refetchPage,l=(F=e.fetchOptions)==null||(N=F.meta)==null?void 0:N.fetchMore,g=l==null?void 0:l.pageParam,b=(l==null?void 0:l.direction)==="forward",_=(l==null?void 0:l.direction)==="backward",a=((q=e.state.data)==null?void 0:q.pages)||[],P=(($=e.state.data)==null?void 0:$.pageParams)||[];let c=P,m=!1;const w=t=>{Object.defineProperty(t,"signal",{enumerable:!0,get:()=>{var o;if((o=e.signal)!=null&&o.aborted)m=!0;else{var r;(r=e.signal)==null||r.addEventListener("abort",()=>{m=!0})}return e.signal}})},A=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),h=(t,o,r,s)=>(c=s?[o,...c]:[...c,o],s?[r,...t]:[...t,r]),f=(t,o,r,s)=>{if(m)return Promise.reject("Cancelled");if(typeof r>"u"&&!o&&t.length)return Promise.resolve(t);const v={queryKey:e.queryKey,pageParam:r,meta:e.options.meta};w(v);const y=A(v);return Promise.resolve(y).then(j=>h(t,r,j,s))};let u;if(!a.length)u=f([]);else if(b){const t=typeof g<"u",o=t?g:p(e.options,a);u=f(a,t,o)}else if(_){const t=typeof g<"u",o=t?g:O(e.options,a);u=f(a,t,o,!0)}else{c=[];const t=typeof e.options.getNextPageParam>"u";u=(d&&a[0]?d(a[0],0,a):!0)?f([],t,P[0]):Promise.resolve(h([],P[0],a[0]));for(let r=1;r<a.length;r++)u=u.then(s=>{if(d&&a[r]?d(a[r],r,a):!0){const y=t?P[r]:p(e.options,s);return f(s,t,y)}return Promise.resolve(h(s,P[r],a[r]))})}return u.then(t=>({pages:t,pageParams:c}))}}}}function p(e,n){return e.getNextPageParam==null?void 0:e.getNextPageParam(n[n.length-1],n)}function O(e,n){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(n[0],n)}function C(e,n){if(e.getNextPageParam&&Array.isArray(n)){const i=p(e,n);return typeof i<"u"&&i!==null&&i!==!1}}function k(e,n){if(e.getPreviousPageParam&&Array.isArray(n)){const i=O(e,n);return typeof i<"u"&&i!==null&&i!==!1}}export{C as a,k as h,M as i};
