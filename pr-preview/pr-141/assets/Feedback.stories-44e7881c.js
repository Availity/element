import{j as u,a as e,F as N}from"./jsx-runtime-a3bcee63.js";import{r as f}from"./index-570b25c1.js";import{T as A,b as B,c as R,P as W,a as L}from"./index-aa1f890f.js";import{B as q,L as j,I as z}from"./index-5496e90f.js";import{T as E}from"./index-9e86b6d5.js";import{F as P,a as G,b as O,C as $}from"./index-cb4dbded.js";import{u as D,C as S}from"./index.esm-d81a0d8c.js";import{G as s}from"./Grid-af1a3ff2.js";import{s as I}from"./styled-7846e708.js";import{T as H}from"./index-96688515.js";import{C as M}from"./Container-a1530f69.js";import"./_commonjsHelpers-042e6b4d.js";import"./Popover-277c5654.js";import"./createTheme-bcd1d157.js";import"./clsx-7dc4e18d.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-16f43d9e.js";import"./useThemeProps-018254e6.js";import"./generateUtilityClasses-70c60a0e.js";import"./Modal-8fa896b2.js";import"./Backdrop-49825a13.js";import"./useTheme-76c02901.js";import"./utils-1ac07bae.js";import"./TransitionGroupContext-c71596b3.js";import"./index-8a077077.js";import"./useForkRef-153a0a89.js";import"./objectWithoutPropertiesLoose-b6174fb2.js";import"./ownerDocument-613eb639.js";import"./ownerWindow-03d1c82d.js";import"./useEventCallback-e1b9edb9.js";import"./useEnhancedEffect-460150e6.js";import"./useSlotProps-f4be827f.js";import"./createChainedFunction-0bab83cf.js";import"./Grow-e87a736b.js";import"./Paper-722ac472.js";import"./debounce-517eeb3c.js";import"./index-7c0e1f2b.js";import"./_baseFor-53bad3ef.js";import"./_initCloneObject-31384e14.js";import"./isPlainObject-272efb33.js";import"./ToggleButtonGroup-303ca8bb.js";import"./react-is.production.min-a192e302.js";import"./ToggleButton-7fcf6cce.js";import"./ButtonBase-d80b4855.js";import"./emotion-react.browser.esm-474fda6d.js";import"./useIsFocusVisible-5e7b1ff1.js";import"./Button-d84dd9a0.js";import"./Tooltip-c716d13a.js";import"./useControlled-9b1271e0.js";import"./useId-6f4bfce0.js";import"./IconButton-de653fbd.js";import"./LoadingButton-7f26c21d.js";import"./extends-90dea224.js";import"./CircularProgress-83597315.js";import"./index-a5c9266e.js";import"./index-9681c8ff.js";import"./Box-0b96d669.js";import"./extendSxProp-9115426f.js";import"./FormControlLabel-625d44f3.js";import"./utils-3d35716f.js";import"./Typography-f61e077a.js";import"./Stack-8a417692.js";import"./styled-11d1647d.js";import"./FormLabel-16418a49.js";import"./isMuiElement-6907f060.js";import"./FormHelperText-ae2a8f0e.js";import"./OutlinedInput-bd5ed4eb.js";import"./GlobalStyles-7ba993a7.js";import"./Select-be273af1.js";import"./Menu-932c384c.js";import"./createSvgIcon-60c2b2ae.js";import"./SvgIcon-951d7748.js";import"./Divider-fcaf2f3a.js";import"./dividerClasses-b19abef8.js";import"./TextField-785bc636.js";import"./faCircleArrowRight-e7789e56.js";import"./faMagnifyingGlass-482fd726.js";const J=I(A,{name:"AvFeedbackContainer",slot:"SmileButtons"})({}),K=({disabled:r,Icon:o,label:i,value:t,...n})=>e("div",{children:e(B,{"aria-label":t,value:t,...n,disabled:r,children:e(o,{fontSize:"large"})})}),_=({analytics:r,appName:o,handleClose:i,loading:t,sent:n,setLoading:p,setSent:c})=>{const{control:h,handleSubmit:y,setValue:d,watch:F}=D(),k=async({smileField:l,...a})=>{p(!0);try{const m=await R.getCurrentRegion();await r.info({surveyId:`${o.replace(/\s/g,"_")}_Smile_Survey`,smileLocation:`${o}`,smile:`icon-${l}`,url:window.location.href,region:m.data.regions[0]&&m.data.regions[0].id,userAgent:window.navigator.userAgent,submitTime:new Date,...a}),c(!0),p(!1)}catch{c(!1),p(!1)}};f.useEffect(()=>{n&&setTimeout(()=>{i()},2e3)},[n]);const C=[{Icon:P,label:"What do you like?",value:"smile"},{Icon:G,label:"What would you improve?",value:"meh"},{Icon:O,label:"What don't you like?",value:"frown"}],V=()=>{const l=F("smileField"),a=C.find(m=>m.value===l);return(a==null?void 0:a.label)||"What would you improve?"};return n?null:u(s,{component:"form",container:!0,justifyContent:"center",onSubmit:y(k),"aria-label":"Feedback Form","aria-describedby":"feedback-form-header",children:[e(S,{control:h,name:"smileField",render:({field:l})=>e(J,{children:C.map(a=>e(K,{disabled:t,...a},a.value)),...l,"aria-labelledby":"feedback-form-header",onChange:(a,m)=>{d(l.name,m)},size:"medium",exclusive:!0})}),e(S,{control:h,name:"feedback",render:({field:l})=>e(E,{...l,fullWidth:!0,multiline:!0,minRows:3,maxRows:3,label:V(),disabled:t}),rules:{maxLength:200,required:!0}}),u(s,{container:!0,direction:"row",marginTop:"16px",spacing:1,children:[e(s,{item:!0,xs:6,children:e(q,{color:"secondary",disabled:t,fullWidth:!0,onClick:i,children:"Cancel"})}),e(s,{item:!0,xs:6,children:e(j,{disabled:!F("smileField"),fullWidth:!0,loading:t,type:"submit",variant:"contained",children:"Send Feedback"})})]})]})};try{_.displayName="FeedbackForm",_.__docgenInfo={description:"",displayName:"FeedbackForm",props:{analytics:{defaultValue:null,description:"",name:"analytics",required:!0,type:{name:"{ info: (entries: Record<string, unknown>) => any; }"}},appName:{defaultValue:null,description:"",name:"appName",required:!0,type:{name:"string"}},handleClose:{defaultValue:null,description:"",name:"handleClose",required:!0,type:{name:"() => void"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},sent:{defaultValue:null,description:"",name:"sent",required:!0,type:{name:"boolean"}},setLoading:{defaultValue:null,description:"",name:"setLoading",required:!0,type:{name:"React.Dispatch<React.SetStateAction<boolean>>"}},setSent:{defaultValue:null,description:"",name:"setSent",required:!0,type:{name:"React.Dispatch<React.SetStateAction<boolean>>"}}}}}catch{}const v=({appName:r,handleClose:o,loading:i,sent:t})=>u(s,{alignItems:"center",container:!0,direction:"row",marginBottom:t?"0px":"8px",justifyContent:"space-between",flexWrap:"nowrap",children:[e(s,{item:!0,whiteSpace:"normal",children:e(H,{component:"h2",variant:"h5",children:t?"Thank you for your feedback.":`Tell us what you think about ${r}`})}),e(s,{item:!0,marginRight:"-8px",children:e(z,{disabled:i,title:"Close",onClick:o,children:e($,{})})})]});try{v.displayName="FeedbackHeader",v.__docgenInfo={description:"",displayName:"FeedbackHeader",props:{appName:{defaultValue:null,description:"",name:"appName",required:!0,type:{name:"string"}},handleClose:{defaultValue:null,description:"",name:"handleClose",required:!0,type:{name:"() => void"}},loading:{defaultValue:null,description:"",name:"loading",required:!0,type:{name:"boolean"}},sent:{defaultValue:null,description:"",name:"sent",required:!0,type:{name:"boolean"}}}}}catch{}const Q=I(M,{name:"AvFeedbackContainer",slot:"root"})({}),g=({analytics:r=L,appName:o})=>{const[i,t]=f.useState(null),[n,p]=f.useState(!1),[c,h]=f.useState(!1),y=k=>{t(k.currentTarget)},d=()=>{t(null)};return u(N,{children:[e(q,{onClick:y,color:"secondary",size:"large",children:"Give Feedback"}),e(W,{anchorEl:i,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{marginTop:"4px"},disableRestoreFocus:!0,onClose:d,open:!!i,transformOrigin:{vertical:"top",horizontal:"right"},children:u(Q,{children:[e(v,{appName:o,handleClose:d,loading:c,sent:n}),e(_,{analytics:r,appName:o,handleClose:d,loading:c,sent:n,setLoading:h,setSent:p})]})})]})};try{g.displayName="Feedback",g.__docgenInfo={description:"",displayName:"Feedback",props:{analytics:{defaultValue:null,description:"",name:"analytics",required:!1,type:{name:"{ info: (entries: any) => any; }"}},appName:{defaultValue:null,description:"",name:"appName",required:!0,type:{name:"string"}}}}}catch{}const yt={title:"Components/Feedback/Feedback",component:g,tags:["autodocs"]},b={render:r=>e(g,{...r}),args:{appName:"This App"}};var w,x,T;b.parameters={...b.parameters,docs:{...(w=b.parameters)==null?void 0:w.docs,source:{originalSource:`{
  render: (args: FeedbackProps) => <Feedback {...args} />,
  args: {
    appName: 'This App'
  }
}`,...(T=(x=b.parameters)==null?void 0:x.docs)==null?void 0:T.source}}};const Ft=["_Feedback"];export{b as _Feedback,Ft as __namedExportsOrder,yt as default};
//# sourceMappingURL=Feedback.stories-44e7881c.js.map
