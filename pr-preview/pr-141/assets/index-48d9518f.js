import{r as h}from"./index-570b25c1.js";import{T as x,P as S,a as T,b as B,c as I}from"./index-aa1f890f.js";import{B as y,L as W,I as A}from"./index-5496e90f.js";import{T as R}from"./index-9e86b6d5.js";import{C as j,F as z,a as L,b as E}from"./index-cb4dbded.js";import{u as G,C as w}from"./index.esm-d81a0d8c.js";import{a as e,j as p,F as P}from"./jsx-runtime-a3bcee63.js";import{M as $}from"./Typography-f61e077a.js";import{C as M}from"./Container-a1530f69.js";import{G as s}from"./Grid-af1a3ff2.js";import{s as C}from"./styled-7846e708.js";var O=C(x,{name:"AvFeedbackContainer",slot:"SmileButtons"})({}),_=({disabled:t,Icon:r,label:n,value:o,...a})=>e("div",{children:e(B,{"aria-label":o,value:o,...a,disabled:t,children:e(r,{fontSize:"large"})})}),q=({analytics:t,appName:r,handleClose:n,loading:o,sent:a,setLoading:u,setSent:d})=>{const{control:f,handleSubmit:b,setValue:m,watch:g}=G(),v=async({smileField:i,...l})=>{u(!0);try{const c=await I.getCurrentRegion();await t.info({surveyId:`${r.replace(/\s/g,"_")}_Smile_Survey`,smileLocation:`${r}`,smile:`icon-${i}`,url:window.location.href,region:c.data.regions[0]&&c.data.regions[0].id,userAgent:window.navigator.userAgent,submitTime:new Date,...l}),d(!0),u(!1)}catch{d(!1),u(!1)}};h.useEffect(()=>{a&&setTimeout(()=>{n()},2e3)},[a]);const F=[{Icon:z,label:"What do you like?",value:"smile"},{Icon:L,label:"What would you improve?",value:"meh"},{Icon:E,label:"What don't you like?",value:"frown"}],k=()=>{const i=g("smileField"),l=F.find(c=>c.value===i);return(l==null?void 0:l.label)||"What would you improve?"};return a?null:p(s,{component:"form",container:!0,justifyContent:"center",onSubmit:b(v),children:[e(w,{control:f,name:"smileField",render:({field:i})=>e(O,{children:F.map(l=>e(_,{disabled:o,...l},l.value)),...i,onChange:(l,c)=>{m(i.name,c)},size:"medium",exclusive:!0})}),e(w,{control:f,name:"feedback",render:({field:i})=>e(R,{...i,fullWidth:!0,multiline:!0,minRows:3,maxRows:3,label:k(),disabled:o}),rules:{maxLength:200,required:!0}}),p(s,{container:!0,direction:"row",marginTop:"16px",spacing:1,children:[e(s,{item:!0,xs:6,children:e(y,{color:"secondary",disabled:o,fullWidth:!0,children:"Cancel"})}),e(s,{item:!0,xs:6,children:e(W,{disabled:!g("smileField"),fullWidth:!0,loading:o,type:"submit",variant:"contained",children:"Send Feedback"})})]})]})},D=h.forwardRef(({children:t,...r},n)=>e($,{...r,ref:n,children:t})),H=({appName:t,handleClose:r,loading:n,sent:o})=>p(s,{alignItems:"center",container:!0,direction:"row",marginBottom:o?"0px":"8px",justifyContent:"space-between",flexWrap:"nowrap",children:[e(s,{item:!0,width:"",whiteSpace:"normal",children:e(D,{component:"h2",variant:"h5",children:o?"Thank you for your feedback.":`Tell us what you think about ${t}`})}),e(s,{item:!0,marginRight:"-8px",children:e(A,{disabled:n,title:"Close",onClick:r,children:e(j,{})})})]}),V=C(M,{name:"AvFeedbackContainer",slot:"root"})({}),te=({analytics:t=T,appName:r})=>{const[n,o]=h.useState(null),[a,u]=h.useState(!1),[d,f]=h.useState(!1),b=v=>{o(v.currentTarget)},m=()=>{o(null)};return p(P,{children:[e(y,{onClick:b,color:"secondary",size:"large",children:"Give Feedback"}),e(S,{anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{marginTop:"4px"},disableRestoreFocus:!0,onClose:m,open:!!n,transformOrigin:{vertical:"top",horizontal:"right"},children:p(V,{children:[e(H,{appName:r,handleClose:m,loading:d,sent:a}),e(q,{analytics:t,appName:r,handleClose:m,loading:d,sent:a,setLoading:f,setSent:u})]})})]})};export{te as F};
//# sourceMappingURL=index-48d9518f.js.map
