import{r as h}from"./index-570b25c1.js";import{T as x,P as S,a as T,b as B,c as I}from"./index-aa1f890f.js";import{B as k,L as W,I as A}from"./index-5496e90f.js";import{T as R}from"./index-9e86b6d5.js";import{C as j,F as z,a as L,b as E}from"./index-cb4dbded.js";import{u as G,C as y}from"./index.esm-d81a0d8c.js";import{a as e,j as b,F as P}from"./jsx-runtime-a3bcee63.js";import{M as $}from"./Typography-f61e077a.js";import{C as M}from"./Container-a1530f69.js";import{G as s}from"./Grid-af1a3ff2.js";import{s as w}from"./styled-7846e708.js";var O=w(x,{name:"AvFeedbackContainer",slot:"SmileButtons"})({}),_=({disabled:a,Icon:o,label:t,value:r,...n})=>e("div",{children:e(B,{"aria-label":r,value:r,...n,disabled:a,children:e(o,{fontSize:"large"})})}),q=({analytics:a,appName:o,handleClose:t,loading:r,sent:n,setLoading:u,setSent:d})=>{const{control:p,handleSubmit:f,setValue:m,watch:g}=G(),v=async({smileField:i,...l})=>{u(!0);try{const c=await I.getCurrentRegion();await a.info({surveyId:`${o.replace(/\s/g,"_")}_Smile_Survey`,smileLocation:`${o}`,smile:`icon-${i}`,url:window.location.href,region:c.data.regions[0]&&c.data.regions[0].id,userAgent:window.navigator.userAgent,submitTime:new Date,...l}),d(!0),u(!1)}catch{d(!1),u(!1)}};h.useEffect(()=>{n&&setTimeout(()=>{t()},2e3)},[n]);const F=[{Icon:z,label:"What do you like?",value:"smile"},{Icon:L,label:"What would you improve?",value:"meh"},{Icon:E,label:"What don't you like?",value:"frown"}],C=()=>{const i=g("smileField"),l=F.find(c=>c.value===i);return(l==null?void 0:l.label)||"What would you improve?"};return n?null:b(s,{component:"form",container:!0,justifyContent:"center",onSubmit:f(v),"aria-label":"Feedback Form","aria-describedby":"feedback-form-header",children:[e(y,{control:p,name:"smileField",render:({field:i})=>e(O,{children:F.map(l=>e(_,{disabled:r,...l},l.value)),...i,"aria-labelledby":"feedback-form-header",onChange:(l,c)=>{m(i.name,c)},size:"medium",exclusive:!0})}),e(y,{control:p,name:"feedback",render:({field:i})=>e(R,{...i,fullWidth:!0,multiline:!0,minRows:3,maxRows:3,label:C(),disabled:r}),rules:{maxLength:200,required:!0}}),b(s,{container:!0,direction:"row",marginTop:"16px",spacing:1,children:[e(s,{item:!0,xs:6,children:e(k,{color:"secondary",disabled:r,fullWidth:!0,onClick:t,children:"Cancel"})}),e(s,{item:!0,xs:6,children:e(W,{disabled:!g("smileField"),fullWidth:!0,loading:r,type:"submit",variant:"contained",children:"Send Feedback"})})]})]})},D=h.forwardRef(({children:a,...o},t)=>e($,{...o,ref:t,children:a})),H=({appName:a,handleClose:o,loading:t,sent:r})=>b(s,{alignItems:"center",container:!0,direction:"row",marginBottom:r?"0px":"8px",justifyContent:"space-between",flexWrap:"nowrap",children:[e(s,{item:!0,whiteSpace:"normal",children:e(D,{component:"h2",variant:"h5",children:r?"Thank you for your feedback.":`Tell us what you think about ${a}`})}),e(s,{item:!0,marginRight:"-8px",children:e(A,{disabled:t,title:"Close",onClick:o,children:e(j,{})})})]}),V=w(M,{name:"AvFeedbackContainer",slot:"root"})({}),te=({analytics:a=T,appName:o})=>{const[t,r]=h.useState(null),[n,u]=h.useState(!1),[d,p]=h.useState(!1),f=v=>{r(v.currentTarget)},m=()=>{r(null)};return b(P,{children:[e(k,{onClick:f,color:"secondary",size:"large",children:"Give Feedback"}),e(S,{anchorEl:t,anchorOrigin:{vertical:"bottom",horizontal:"right"},sx:{marginTop:"4px"},disableRestoreFocus:!0,onClose:m,open:!!t,transformOrigin:{vertical:"top",horizontal:"right"},children:b(V,{children:[e(H,{appName:o,handleClose:m,loading:d,sent:n}),e(q,{analytics:a,appName:o,handleClose:m,loading:d,sent:n,setLoading:p,setSent:u})]})})]})};export{te as F};
//# sourceMappingURL=index-158332cd.js.map
