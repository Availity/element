{"version":3,"file":"index-158332cd.js","sources":["../../../packages/feedback/dist/index.mjs"],"sourcesContent":["// src/lib/Feedback.tsx\nimport { useState } from \"react\";\nimport { Popover } from \"@availity/mui-popover\";\nimport { Button as Button2 } from \"@availity/mui-button\";\nimport { Container, styled as styled2 } from \"@mui/material\";\nimport { avLogMessagesApi } from \"@availity/api-axios\";\n\n// src/lib/FeedbackForm.tsx\nimport { useEffect } from \"react\";\nimport { TextField } from \"@availity/mui-textfield\";\nimport { LoadingButton, Button } from \"@availity/mui-button\";\nimport { ToggleButtonGroup, ToggleButton } from \"@availity/mui-toggle-button\";\nimport { Grid, styled } from \"@mui/material\";\nimport { FaceFrownIcon, FaceNeutralIcon, FaceSmileIcon } from \"@availity/mui-icon\";\nimport { avRegionsApi } from \"@availity/api-axios\";\nimport { useForm, Controller } from \"react-hook-form\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar SmileButtons = styled(ToggleButtonGroup, { name: \"AvFeedbackContainer\", slot: \"SmileButtons\" })({});\nvar SmileButton = ({ disabled, Icon, label, value, ...props }) => /* @__PURE__ */ jsx(\"div\", {\n  children: /* @__PURE__ */ jsx(ToggleButton, {\n    \"aria-label\": value,\n    value,\n    ...props,\n    disabled,\n    children: /* @__PURE__ */ jsx(Icon, {\n      fontSize: \"large\"\n    })\n  })\n});\nvar FeedbackForm = ({\n  analytics,\n  appName,\n  handleClose,\n  loading,\n  sent,\n  setLoading,\n  setSent\n}) => {\n  const { control, handleSubmit, setValue, watch } = useForm();\n  const onSubmit = async ({ smileField, ...values }) => {\n    setLoading(true);\n    try {\n      const response = await avRegionsApi.getCurrentRegion();\n      await analytics.info({\n        surveyId: `${appName.replace(/\\s/g, \"_\")}_Smile_Survey`,\n        smileLocation: `${appName}`,\n        smile: `icon-${smileField}`,\n        url: window.location.href,\n        region: response.data.regions[0] && response.data.regions[0].id,\n        userAgent: window.navigator.userAgent,\n        submitTime: new Date(),\n        ...values\n      });\n      setSent(true);\n      setLoading(false);\n    } catch {\n      setSent(false);\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    if (sent) {\n      setTimeout(() => {\n        handleClose();\n      }, 2e3);\n    }\n  }, [sent]);\n  const options = [\n    {\n      Icon: FaceSmileIcon,\n      label: \"What do you like?\",\n      value: \"smile\"\n    },\n    {\n      Icon: FaceNeutralIcon,\n      label: \"What would you improve?\",\n      value: \"meh\"\n    },\n    { Icon: FaceFrownIcon, label: \"What don't you like?\", value: \"frown\" }\n  ];\n  const getFeedbackLabel = () => {\n    const smile = watch(\"smileField\");\n    const option = options.find((option2) => option2.value === smile);\n    return (option == null ? void 0 : option.label) || \"What would you improve?\";\n  };\n  if (!sent) {\n    return /* @__PURE__ */ jsxs(Grid, {\n      component: \"form\",\n      container: true,\n      justifyContent: \"center\",\n      onSubmit: handleSubmit(onSubmit),\n      \"aria-label\": \"Feedback Form\",\n      \"aria-describedby\": \"feedback-form-header\",\n      children: [\n        /* @__PURE__ */ jsx(Controller, {\n          control,\n          name: \"smileField\",\n          render: ({ field }) => {\n            return /* @__PURE__ */ jsx(SmileButtons, {\n              children: options.map((props) => /* @__PURE__ */ jsx(SmileButton, {\n                disabled: loading,\n                ...props\n              }, props.value)),\n              ...field,\n              \"aria-labelledby\": \"feedback-form-header\",\n              onChange: (event, value) => {\n                setValue(field.name, value);\n              },\n              size: \"medium\",\n              exclusive: true\n            });\n          }\n        }),\n        /* @__PURE__ */ jsx(Controller, {\n          control,\n          name: \"feedback\",\n          render: ({ field }) => /* @__PURE__ */ jsx(TextField, {\n            ...field,\n            fullWidth: true,\n            multiline: true,\n            minRows: 3,\n            maxRows: 3,\n            label: getFeedbackLabel(),\n            disabled: loading\n          }),\n          rules: { maxLength: 200, required: true }\n        }),\n        /* @__PURE__ */ jsxs(Grid, {\n          container: true,\n          direction: \"row\",\n          marginTop: \"16px\",\n          spacing: 1,\n          children: [\n            /* @__PURE__ */ jsx(Grid, {\n              item: true,\n              xs: 6,\n              children: /* @__PURE__ */ jsx(Button, {\n                color: \"secondary\",\n                disabled: loading,\n                fullWidth: true,\n                onClick: handleClose,\n                children: \"Cancel\"\n              })\n            }),\n            /* @__PURE__ */ jsx(Grid, {\n              item: true,\n              xs: 6,\n              children: /* @__PURE__ */ jsx(LoadingButton, {\n                disabled: !watch(\"smileField\"),\n                fullWidth: true,\n                loading,\n                type: \"submit\",\n                variant: \"contained\",\n                children: \"Send Feedback\"\n              })\n            })\n          ]\n        })\n      ]\n    });\n  } else {\n    return null;\n  }\n};\n\n// src/lib/FeedbackHeader.tsx\nimport { IconButton } from \"@availity/mui-button\";\nimport { CloseIcon } from \"@availity/mui-icon\";\n\n// ../typography/src/lib/Typography.tsx\nimport { forwardRef } from \"react\";\nimport { Typography as MuiTypography } from \"@mui/material\";\nimport { jsx as jsx2 } from \"react/jsx-runtime\";\nvar Typography = forwardRef(\n  ({ children, ...rest }, ref) => {\n    return /* @__PURE__ */ jsx2(MuiTypography, {\n      ...rest,\n      ref,\n      children\n    });\n  }\n);\n\n// src/lib/FeedbackHeader.tsx\nimport { Grid as Grid2 } from \"@mui/material\";\nimport { jsx as jsx3, jsxs as jsxs2 } from \"react/jsx-runtime\";\nvar FeedbackHeader = ({ appName, handleClose, loading, sent }) => {\n  return /* @__PURE__ */ jsxs2(Grid2, {\n    alignItems: \"center\",\n    container: true,\n    direction: \"row\",\n    marginBottom: !sent ? \"8px\" : \"0px\",\n    justifyContent: \"space-between\",\n    flexWrap: \"nowrap\",\n    children: [\n      /* @__PURE__ */ jsx3(Grid2, {\n        item: true,\n        whiteSpace: \"normal\",\n        children: /* @__PURE__ */ jsx3(Typography, {\n          component: \"h2\",\n          variant: \"h5\",\n          children: sent ? \"Thank you for your feedback.\" : `Tell us what you think about ${appName}`\n        })\n      }),\n      /* @__PURE__ */ jsx3(Grid2, {\n        item: true,\n        marginRight: \"-8px\",\n        children: /* @__PURE__ */ jsx3(IconButton, {\n          disabled: loading,\n          title: \"Close\",\n          onClick: handleClose,\n          children: /* @__PURE__ */ jsx3(CloseIcon, {})\n        })\n      })\n    ]\n  });\n};\n\n// src/lib/Feedback.tsx\nimport { Fragment, jsx as jsx4, jsxs as jsxs3 } from \"react/jsx-runtime\";\nvar FeedbackContainer = styled2(Container, { name: \"AvFeedbackContainer\", slot: \"root\" })({});\nvar Feedback = ({ analytics = avLogMessagesApi, appName }) => {\n  const [anchorEl, setAnchorEl] = useState(null);\n  const [sent, setSent] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const handlePopoverOpen = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n  const handlePopoverClose = () => {\n    setAnchorEl(null);\n  };\n  const open = Boolean(anchorEl);\n  return /* @__PURE__ */ jsxs3(Fragment, {\n    children: [\n      /* @__PURE__ */ jsx4(Button2, {\n        onClick: handlePopoverOpen,\n        color: \"secondary\",\n        size: \"large\",\n        children: \"Give Feedback\"\n      }),\n      /* @__PURE__ */ jsx4(Popover, {\n        anchorEl,\n        anchorOrigin: {\n          vertical: \"bottom\",\n          horizontal: \"right\"\n        },\n        sx: { marginTop: \"4px\" },\n        disableRestoreFocus: true,\n        onClose: handlePopoverClose,\n        open,\n        transformOrigin: {\n          vertical: \"top\",\n          horizontal: \"right\"\n        },\n        children: /* @__PURE__ */ jsxs3(FeedbackContainer, {\n          children: [\n            /* @__PURE__ */ jsx4(FeedbackHeader, {\n              appName,\n              handleClose: handlePopoverClose,\n              loading,\n              sent\n            }),\n            /* @__PURE__ */ jsx4(FeedbackForm, {\n              analytics,\n              appName,\n              handleClose: handlePopoverClose,\n              loading,\n              sent,\n              setLoading,\n              setSent\n            })\n          ]\n        })\n      })\n    ]\n  });\n};\nexport {\n  Feedback\n};\n"],"names":["SmileButtons","styled","ToggleButtonGroup","SmileButton","disabled","Icon","label","value","props","jsx","ToggleButton","FeedbackForm","analytics","appName","handleClose","loading","sent","setLoading","setSent","control","handleSubmit","setValue","watch","useForm","onSubmit","smileField","values","response","avRegionsApi","useEffect","options","FaceSmileIcon","FaceNeutralIcon","FaceFrownIcon","getFeedbackLabel","smile","option","option2","jsxs","Grid","Controller","field","event","TextField","Button","LoadingButton","Typography","forwardRef","children","rest","ref","jsx2","MuiTypography","FeedbackHeader","jsxs2","Grid2","jsx3","IconButton","CloseIcon","FeedbackContainer","styled2","Container","Feedback","avLogMessagesApi","anchorEl","setAnchorEl","useState","handlePopoverOpen","handlePopoverClose","jsxs3","Fragment","jsx4","Button2","Popover"],"mappings":"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"}