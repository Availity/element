import{r}from"./index-DcWiA9TO.js";import{u as C}from"./useForkRef-BVrIj09m.js";import{g as T}from"./getReactElementRef-AnOffBoZ.js";import{u as g}from"./useTimeout-B8wmcRZV.js";import{o as p}from"./ownerDocument-DW-IO8s5.js";function v(o){return o.substring(2).toLowerCase()}function w(o,s){return s.documentElement.clientWidth<o.clientX||s.documentElement.clientHeight<o.clientY}function M(o){const{children:s,disableReactTree:R=!1,mouseEvent:u="onClick",onClickAway:L,touchEvent:i="onTouchEnd"}=o,f=r.useRef(!1),c=r.useRef(null),l=r.useRef(!1),d=r.useRef(!1);r.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const k=C(T(s),c),a=g(e=>{const t=d.current;d.current=!1;const n=p(c.current);if(!l.current||!c.current||"clientX"in e&&w(e,n))return;if(f.current){f.current=!1;return}let E;e.composedPath?E=e.composedPath().includes(c.current):E=!n.documentElement.contains(e.target)||c.current.contains(e.target),!E&&(R||!t)&&L(e)}),h=e=>t=>{d.current=!0;const n=s.props[e];n&&n(t)},m={ref:k};return i!==!1&&(m[i]=h(i)),r.useEffect(()=>{if(i!==!1){const e=v(i),t=p(c.current),n=()=>{f.current=!0};return t.addEventListener(e,a),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,a),t.removeEventListener("touchmove",n)}}},[a,i]),u!==!1&&(m[u]=h(u)),r.useEffect(()=>{if(u!==!1){const e=v(u),t=p(c.current);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}},[a,u]),r.cloneElement(s,m)}export{M as C};
