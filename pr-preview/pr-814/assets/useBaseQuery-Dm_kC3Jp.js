import{r as u}from"./index-BgYLq7fD.js";import{u as f,a as y,b as p,n,e as R,c as C,d as E,f as b,s as g,g as S,h}from"./suspense-r7UyhJBu.js";function O(a,c){const i=f({context:a.context}),t=y(),o=p(),e=i.defaultQueryOptions(a);e._optimisticResults=t?"isRestoring":"optimistic",e.onError&&(e.onError=n.batchCalls(e.onError)),e.onSuccess&&(e.onSuccess=n.batchCalls(e.onSuccess)),e.onSettled&&(e.onSettled=n.batchCalls(e.onSettled)),R(e),C(e,o),E(o);const[r]=u.useState(()=>new c(i,e)),s=r.getOptimisticResult(e);if(b(u.useCallback(l=>{const d=t?()=>{}:r.subscribe(n.batchCalls(l));return r.updateResult(),d},[r,t]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),u.useEffect(()=>{r.setOptions(e,{listeners:!1})},[e,r]),g(e,s,t))throw S(e,r,o);if(h({result:s,errorResetBoundary:o,useErrorBoundary:e.useErrorBoundary,query:r.getCurrentQuery()}))throw s.error;return e.notifyOnChangeProps?s:r.trackResult(s)}export{O as u};
